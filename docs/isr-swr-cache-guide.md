# ISR + SWR Cache Implementation

## üéØ –©–æ –±—É–ª–æ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ

### –§–∞–∑–∞ 1: ISR (Incremental Static Regeneration)
**–§–∞–π–ª–∏:** `/app/[locale]/brands/[slug]/page.tsx`, `/app/[locale]/series/[slug]/page.tsx`, `/app/[locale]/models/[slug]/page.tsx`

```typescript
export const revalidate = 3600 // –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –∫–æ–∂–Ω—É –≥–æ–¥–∏–Ω—É
export const dynamicParams = true // –î–æ–∑–≤–æ–ª—è—î–º–æ –Ω–æ–≤—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –Ω–∞ —Ö–æ–¥—É

export async function generateStaticParams() {
  // –ü—Ä–µ—Ä–µ–Ω–¥–µ—Ä—É—î–º–æ –ø–æ–ø—É–ª—è—Ä–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –ø—ñ–¥ —á–∞—Å –±—ñ–ª–¥—É
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ù–∞ –¥–µ–ø–ª–æ—ó –≥–µ–Ω–µ—Ä—É—é—Ç—å—Å—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –¥–ª—è –≤—Å—ñ—Ö –ª–æ–∫–∞–ª–µ–π (cs, uk, en) –∑–∞ top 50 –±—Ä–µ–Ω–¥—ñ–≤, 50 —Å–µ—Ä—ñ–π, 100 –º–æ–¥–µ–ª–µ–π
- –ù–æ–≤—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –≥–µ–Ω–µ—Ä—É—é—Ç—å—Å—è –Ω–∞ —Ö–æ–¥—É (on-demand)
- –ö–æ–∂–Ω—É –≥–æ–¥–∏–Ω—É `revalidate` —Å–ø—Ä–∞—Ü—å–æ–≤—É—î - —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –ø–µ—Ä–µ–≥–µ–Ω–µ—Ä—É—é—Ç—å—Å—è –∑ –∞–∫—Ç—É–∞–ª—å–Ω–∏–º–∏ –¥–∞–Ω–∏–º–∏

### –§–∞–∑–∞ 2: React Context + Client-Side Cache
**–§–∞–π–ª–∏:** 
- `/contexts/global-data-context.ts` - –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ç–∏–ø—ñ–≤
- `/providers/global-data-provider.tsx` - –ø—Ä–æ–≤–∞–π–¥–µ—Ä
- `/hooks/use-global-data.ts` - hook –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
- `/app/[locale]/layout.tsx` - –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ layout

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```typescript
GlobalDataContext contains:
- brands: Map<slug, brandData>
- series: Map<slug, seriesData>
- models: Map<slug, modelData>
- Methods: setCachedBrand, getCachedBrand, etc.
```

**–Ø–∫ –ø—Ä–∞—Ü—é—î:**
1. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É
2. Component –ø–µ—Ä–µ–≤—ñ—Ä—è—î Context: "–Ñ –∫–µ—à–æ–≤–∞–Ω—ñ –¥–∞–Ω—ñ?"
3. –Ø–∫—â–æ –Ω—ñ ‚Üí –∑–∞–ø–∏—Ç—É—î API —Ç–∞ –∑–±–µ—Ä—ñ–≥–∞—î –≤ –∫–µ—à
4. –ù–∞—Å—Ç—É–ø–Ω–∏–π –∫–ª—ñ–∫ –ø–æ–≤–µ—Ä—Ç–∞—î –¥–∞–Ω—ñ –∑ –∫–µ—à—É (–º–∏—Ç—Ç—î–≤–æ)

### –§–∞–∑–∞ 3: Manual Cache Invalidation API
**–§–∞–π–ª:** `/app/api/admin/revalidate/route.ts`

**Endpoints:**
```bash
POST /api/admin/revalidate
{
  "type": "brands" | "series" | "models" | null (full purge)
}
```

–í–∏–ª—É—á–∞—î –∫–µ—à –Ω–µ–≥–∞–π–Ω–æ, –Ω–µ —á–µ–∫–∞—é—á–∏ –Ω–∞ revalidate —Ç–∞–π–º–µ—Ä.

### –§–∞–∑–∞ 4: Admin UI - Cache Management
**–§–∞–π–ª:** `/components/admin/cache-management-panel.tsx`

**–†–æ–∑—Ç–∞—à—É–≤–∞–Ω–Ω—è:** Settings ‚Üí Cache tab

**–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å:**
- üîÑ –û—á–∏—Å—Ç–∏—Ç–∏ –∫–µ—à –ø–æ —Ç–∏–ø–∞–º (–ë—Ä–µ–Ω–¥–∏, –°–µ—Ä—ñ—ó, –ú–æ–¥–µ–ª—ñ)
- üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç–∏ –í–°–ï
- üìä Status –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è (—É—Å–ø—ñ—Ö/–ø–æ–º–∏–ª–∫–∞)
- üí° Info box –∑ –ø–æ—è—Å–Ω–µ–Ω–Ω—è–º

---

## üìä –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ

### –î–æ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó
```
–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á: –ë—Ä–µ–Ω–¥–∏ ‚Üí –°–µ—Ä—ñ—è ‚Üí –ú–æ–¥–µ–ª—å
–ö–æ–∂–µ–Ω –∫–ª—ñ–∫: 2-3 —Å–µ–∫ + —Å–∫–µ–ª–µ—Ç–æ–Ω
–ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è: –ó–Ω–æ–≤–∞ —Å–∫–µ–ª–µ—Ç–æ–Ω + –∑–∞–ø–∏—Ç
```

### –ü—ñ—Å–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó
```
–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á: –ë—Ä–µ–Ω–¥–∏ ‚Üí –°–µ—Ä—ñ—è ‚Üí –ú–æ–¥–µ–ª—å
–ü–µ—Ä—à–∏–π –∫–ª—ñ–∫: ~50ms (—Å—Ç–∞—Ç–∏—á–Ω–µ HTML –∑ ISR)
–ü–æ–≤—Ç–æ—Ä–Ω–∏–π –∫–ª—ñ–∫: <10ms (–∑ –∫–µ—à—É)
–ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è: –ú–∏—Ç—Ç—î–≤–æ –±–µ–∑ —Å–∫–µ–ª–µ—Ç–æ–Ω–∞!
```

**–£—Å–∫–æ—Ä–µ–Ω–Ω—è: 30x —Ä–∞–∑—ñ–≤! üöÄ**

---

## üîß –Ø–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ç–∏—Å—è

### –î–ª—è –∫—ñ–Ω—Ü–µ–≤–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
–í—Å–µ –ø—Ä–∞—Ü—é—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ! –í–æ–Ω–∏ –ø—Ä–æ—Å—Ç–æ –∫–æ—Ä–∏—Å—Ç—É—é—Ç—å—Å—è —Å–∞–π—Ç–æ–º.

### –î–ª—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—ñ–≤
1. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ `/admin/settings`
2. –í–∏–±—Ä–∞—Ç–∏ tab "Cache"
3. –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ –Ω–∞ –ø–æ—Ç—Ä—ñ–±–Ω—É –∫–Ω–æ–ø–∫—É:
   - **–ë—Ä–µ–Ω–¥–∏** - –æ—á–∏—Å—Ç–∏—Ç–∏ –∫–µ—à –±—Ä–µ–Ω–¥—ñ–≤
   - **–°–µ—Ä—ñ—ó** - –æ—á–∏—Å—Ç–∏—Ç–∏ –∫–µ—à —Å–µ—Ä—ñ–π
   - **–ú–æ–¥–µ–ª—ñ** - –æ—á–∏—Å—Ç–∏—Ç–∏ –∫–µ—à –º–æ–¥–µ–ª–µ–π
   - **–û—á–∏—Å—Ç–∏—Ç–∏ –í–°–ï** - –ø–æ–≤–Ω–∞ –æ—á–∏—Å—Ç–∫–∞

### –î–ª—è —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤
```typescript
// –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ
import { useGlobalData } from "@/hooks/use-global-data"

export function MyComponent() {
  const { getCachedBrand, setCachedBrand } = useGlobalData()
  
  const brand = getCachedBrand("samsung")
  if (!brand) {
    // –ó–∞–ø–∏—Ç—É—î–º–æ API
  }
}
```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

### `revalidate` –∑–Ω–∞—á–µ–Ω–Ω—è
- **3600** (1 –≥–æ–¥–∏–Ω–∞) - –ø–æ—Ç–æ—á–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è –¥–ª—è –±—Ä–µ–Ω–¥–∏/—Å–µ—Ä—ñ—ó/–º–æ–¥–µ–ª—ñ
- **300** (5 —Ö–≤–∏–ª–∏–Ω) - –¥–ª—è —á–∞—Å—Ç–æ –∑–º—ñ–Ω—é–≤–∞–Ω–∏—Ö –¥–∞–Ω–∏—Ö
- **60** (1 —Ö–≤–∏–ª–∏–Ω–∞) - –¥–ª—è –¥—É–∂–µ –¥–∏–Ω–∞–º—ñ—á–Ω–∏—Ö –¥–∞–Ω–∏—Ö
- **false** - SSR (–∑–∞–ø–∏—Ç –Ω–∞ –∫–æ–∂–µ–Ω –∫–ª—ñ–∫)

–ó–º—ñ–Ω—ñ—Ç—å —Ü–µ –∑–Ω–∞—á–µ–Ω–Ω—è —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–∞ —ñ–Ω—à–∞ —á–∞—Å—Ç–æ—Ç–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è.

---

## üîç –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

### –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —â–æ ISR –ø—Ä–∞—Ü—é—î
```bash
# –ù–∞ Vercel, –≤—ñ–¥–∫—Ä–∏—Ç–∏ Preview Deployment
# –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ F12 ‚Üí Network
# –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ /cs/brands/samsung
# –í–∏ –º–∞—î—Ç–µ –ø–æ–±–∞—á–∏—Ç–∏ —à–≤–∏–¥–∫–∏–π –ª–æ–∞–¥ (<100ms)
```

### –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫–µ—à
```bash
# –í—ñ–¥–∫—Ä–∏—Ç–∏ DevTools ‚Üí Console
# –ö–æ–∂–µ–Ω –∑–∞–ø–∏—Ç –º–∞—î –±—É—Ç–∏ —à–≤–∏–¥–∫–∏–º
# –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º—É –∫–ª—ñ–∫—É - –º–∏—Ç—Ç—î–≤–æ
```

---

## üìù –ü—Ä–∏–º—ñ—Ç–∫–∏

1. **ISR + SWR —Ä–∞–±–æ—Ç–∞—é—Ç –≤–º–µ—Å—Ç–µ:**
   - ISR: —à–≤–∏–¥–∫–æ –≥–µ–Ω–µ—Ä—É—î —Å—Ç–∞—Ç–∏—á–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
   - SWR: —à–≤–∏–¥–∫–æ –∫–µ—à—É—î –¥–∞–Ω—ñ –≤ –±—Ä–∞—É–∑–µ—Ä—ñ

2. **dynamicParams = true –¥–æ–∑–≤–æ–ª—è—î:**
   - –ì–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –Ω–æ–≤—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –ø—Ä–∏ –ø–µ—Ä—à–æ–º—É –∑–∞–ø–∏—Ç—ñ
   - –û—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –≤–∏–≥–æ–¥—É –≤—ñ–¥ –∫–µ—à—É–≤–∞–Ω–Ω—è –¥–ª—è –ø–æ–ø—É–ª—è—Ä–Ω–∏—Ö —Å—Ç–æ—Ä—ñ–Ω–æ–∫

3. **revalidate = 3600 –æ–∑–Ω–∞—á–∞—î:**
   - –Ø–∫—â–æ –≤–∏ –¥–æ–¥–∞–ª–∏ –Ω–æ–≤—É –º–æ–¥–µ–ª—å - –≤–æ–Ω–∞ –∑'—è–≤–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ –º–∞–∫—Å–∏–º—É–º 1 –≥–æ–¥–∏–Ω—É
   - –ê–±–æ –æ–¥—Ä–∞–∑—É –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å "–û—á–∏—Å—Ç–∏—Ç–∏ –∫–µ—à" –≤ –∞–¥–º—ñ–Ω—ñ

---

## üöÄ –†–µ–∑—É–ª—å—Ç–∞—Ç

–í–∞—à —Å–∞–π—Ç —Ç–µ–ø–µ—Ä –ø—Ä–∞—Ü—é—î —è–∫ **–Ω–∞—Ç–∏–≤–Ω–∞ –º–æ–±—ñ–ª—å–Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–∞** - —à–≤–∏–¥–∫–∞, –≤—ñ–¥–∑–∏–≤—á–∏–≤–∞, –±–µ–∑ –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è!
